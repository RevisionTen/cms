forms:
    load_easyadmin_config: false
    item_types:
        #GroupItem:
        #    class: RevisionTen\Forms\Form\Items\GroupItem
        #    icon: 'fa-object-group'
        TextItem:
            class: RevisionTen\Forms\Form\Items\TextItem
            icon: 'fa-comment'
        TextAreaItem:
            class: RevisionTen\Forms\Form\Items\TextAreaItem
            icon: 'fa-book'
        EmailItem:
            class: RevisionTen\Forms\Form\Items\EmailItem
            icon: 'fa-at'
        CheckboxItem:
            class: RevisionTen\Forms\Form\Items\CheckboxItem
            icon: 'fa-check-square'
        ChoiceItem:
            class: RevisionTen\Forms\Form\Items\ChoiceItem
            icon: 'fa-list-ul'
        EntityItem:
            class: RevisionTen\Forms\Form\Items\EntityItem
            icon: 'fa-database'
        MarkupItem:
            class: RevisionTen\Forms\Form\Items\MarkupItem
            icon: 'fa-code'
        HiddenItem:
            class: RevisionTen\Forms\Form\Items\HiddenItem
            icon: 'fa-eye-slash'
        SubmitItem:
            class: RevisionTen\Forms\Form\Items\SubmitItem
            icon: 'fa-paper-plane'

twig:
    paths:
        '%kernel.project_dir%/vendor/revision-ten/cms/Templates': cms
        '%kernel.project_dir%/vendor/easycorp/easyadmin-bundle/src/Resources/views': EasyAdminBase
        '%kernel.project_dir%/vendor/revision-ten/cms/Templates/FormsBundle': forms
        '%kernel.project_dir%/vendor/revision-ten/cms/Templates/EasyAdmin': EasyAdmin
    form_themes:
          - '@cms/Form/form_theme.html.twig'

framework:
    translator:
        paths:
            - '%kernel.project_dir%/vendor/revision-ten/cms/Resources/translations'
    session:
        # The native PHP session handler will be used
        handler_id: ~
        #cookie_secure: false # This determines whether cookies should only be sent over secure connections.
        #cookie_httponly: true # This determines whether cookies should only be accessible through the HTTP protocol. This means that the cookie won't be accessible by scripting languages, such as JavaScript. This setting can effectively help to reduce identity theft through XSS attacks.
    # Add template.engines for the ckeditor.
    templating:
        engines: ['twig']

doctrine:
    orm:
        mappings:
            CmsBundle:
                mapping: true
                type: annotation
                dir: 'Model'
                alias: CmsBundle
                prefix: 'RevisionTen\CMS\Model'
                is_bundle: true

gregwar_image:
    web_dir: "%kernel.project_dir%/public"

easy_admin:
    site_name: '<img class="revision-ten-logo" src="/bundles/cms/icons/logo.svg"> %cms.site_name%'
    design:
        menu: '%cms.admin_menu%'
        brand_color: '#41b3f9'
        assets:
            css:
                - 'https://fonts.googleapis.com/css?family=Rubik'
                - 'https://use.fontawesome.com/releases/v5.5.0/css/all.css'
                - 'https://use.fontawesome.com/releases/v5.5.0/css/v4-shims.css'
                - 'bundles/cms/css/trix.css?v=%cms.version%'
                - 'bundles/cms/css/jquery-ui.min.css?v=%cms.version%'
                - 'bundles/cms/css/easyadmin.css?v=%cms.version%'
                - 'bundles/cms/css/cms-file-picker.css?v=%cms.version%'
            js:
                - 'bundles/cms/js/bootstrap/popper.min.js?v=%cms.version%'
                - 'bundles/cms/js/bootstrap/bootstrap.min.js?v=%cms.version%'
                - 'bundles/cms/libs/dist/trix.js?v=%cms.version%'
                - 'bundles/cms/libs/dist/ckeditor/ckeditor.js?v=%cms.version%'
                - 'bundles/cms/libs/dist/jquery-sortable-min.js?v=%cms.version%'
                - 'bundles/cms/js/admin-backend.js?v=%cms.version%'
                - 'bundles/cms/js/file-picker.js?v=%cms.version%'
    formats:
        date:     'd.m.Y'
        time:     'H:i'
        datetime: 'd.m.Y H:i'
    entities:
        Alias:
            label: 'Paths'
            class: RevisionTen\CMS\Model\Alias
            permissions:
                list: 'alias_list'
                search: 'alias_search'
                new: 'alias_create'
                edit: 'alias_edit'
                delete: 'alias_delete'
            list:
                actions:
                    - { name: 'edit', label: '', title: 'Edit', icon: 'edit' }
                    - { name: 'delete', label: '', title: 'Delete', icon: 'trash', css_class: 'text-danger' }
                fields:
                    #- 'uuid'
                    - 'id'
                    - { property: 'enabled', type: 'boolean' }
                    - { property: 'path', template: '@cms/Admin/Alias/List/path.html.twig' }
                    - { property: 'language', template: '@cms/Admin/Alias/List/language.html.twig' }
                    #- { property: 'website', template: '@cms/Admin/Alias/List/website.html.twig' }
                    - { property: 'pageStreamRead', type: 'object', template: '@cms/Admin/Alias/List/page.html.twig' }
                    #- { property: 'controller', template: '@cms/Admin/Alias/List/controller.html.twig' }
                    - { property: 'redirect', label: '404 Redirect', template: '@cms/Admin/Alias/List/redirect.html.twig' }
                    - { property: 'priority', label: 'Search Engine Priority', template: '@cms/Admin/Alias/List/priority.html.twig' }
            form:
                fields:
                    - 'path'
                    - { property: 'language', type: 'choice', type_options: { choices: '%cms.page_languages%', attr: { class: 'custom-select' } } }
                    - 'pageStreamRead'
                    - 'redirect'
                    - { property: 'priority', label: 'Search Engine Priority', type: 'choice', type_options: { choices: { 'Very low': 0.1, 'Low': 0.3, 'Normal': 0.5, 'High': 0.6, 'Very high': 1 }, attr: { class: 'custom-select' } } }
        Website:
            label: 'Websites'
            class: RevisionTen\CMS\Model\Website
            permissions:
                list: 'website_list'
                search: 'website_search'
                new: 'website_create'
                edit: 'website_edit'
            list:
                actions:
                    - { name: 'edit', label: '', title: 'Edit', icon: 'edit' }
                    - '-delete'
                fields:
                    #- 'uuid'
                    - 'title'
                    - 'defaultLanguage'
                    - 'users'
                    - 'domains'
                    - 'aliases'
            form:
                fields:
                    - { property: 'title', type: 'text' }
                    - { property: 'siteVerification', type: 'text', label: 'Google Site Verification Meta-Tag' }
                    - { property: 'defaultLanguage', type: 'choice', type_options: { choices: '%cms.page_languages%', attr: { class: 'custom-select' } } }
                    - { property: 'domains', type: 'Symfony\Component\Form\Extension\Core\Type\CollectionType', type_options: { entry_type: 'RevisionTen\CMS\Form\Admin\DomainType', entry_options: { label: false }, by_reference: false, allow_delete: true, delete_empty: true, allow_add: true } }
                    - { property: 'errorPages', type: 'Symfony\Bridge\Doctrine\Form\Type\EntityType', type_options: { multiple: true, class: 'RevisionTen\CMS\Model\PageStreamRead' } }
        PageStreamRead:
            label: 'Pages'
            class: RevisionTen\CMS\Model\PageStreamRead
            permissions:
                list: 'page_list'
                search: 'page_search'
                new: 'page_create'
                edit: 'page_edit'
                delete: 'page_delete'
                clone: 'page_clone'
            templates:
                list: '@cms/Admin/Page/list.html.twig'
            list:
                filters:
                    - property: 'template'
                      label: 'Page template'
                      type: 'RevisionTen\CMS\Form\Filter\TemplateFilterType'
                    - 'published'
                    - property: 'language'
                      type: 'RevisionTen\CMS\Form\Filter\LanguageFilterType'
                sort: ['modified', 'DESC']
                actions:
                    - { name: 'cms_edit_aggregate', type: 'route', label: '', title: 'Edit aggregate', icon: 'edit', permission: 'page_edit' }
                    - { name: 'cms_clone_aggregate', type: 'route', label: '', title: 'Clone page', icon: 'clone', permission: 'page_clone' }
                    - { name: 'cms_delete_aggregate', type: 'route', label: '', title: 'Delete page', icon: 'trash', css_class: 'text-danger', permission: 'page_delete' }
                    - '-new'
                    - '-edit'
                    - '-delete'
                fields:
                    #- 'uuid'
                    - { property: 'title', css_class: 'title-truncate' }
                    - 'version'
                    - 'language'
                    #- { property: 'website', template: '@cms/Admin/Website/List/website.html.twig' }
                    - { property: 'published', label: 'State', template: '@cms/Admin/Page/List/published.html.twig' }
                    - { property: 'template', label: "Page template", template: '@cms/Admin/Page/List/template.html.twig' }
                    - { property: 'created', type: 'datetime' }
                    - { property: 'modified', type: 'datetime' }
        PageStreamReadArchive:
            label: 'Archive'
            class: RevisionTen\CMS\Model\PageStreamRead
            permissions:
                list: 'page_list'
                search: 'page_search'
                new: 'page_create'
                edit: 'page_edit'
                delete: 'page_delete'
                clone: 'page_clone'
            list:
                sort: ['modified', 'DESC']
                actions:
                    - '-new'
                    - '-edit'
                    - '-delete'
                fields:
                    #- 'uuid'
                    - { property: 'title', css_class: 'title-truncate' }
                    - 'version'
                    - 'language'
                    #- { property: 'website', template: '@cms/Admin/Website/List/website.html.twig' }
                    - { property: 'published', label: 'State', template: '@cms/Admin/Page/List/published.html.twig' }
                    - { property: 'template', label: "Page template", template: '@cms/Admin/Page/List/template.html.twig' }
                    - { property: 'created', type: 'datetime' }
                    - { property: 'modified', type: 'datetime' }
        EventStreamObject:
            label: 'Log'
            class: RevisionTen\CQRS\Model\EventStreamObject
            permissions:
                list: 'event_list'
                search: 'event_search'
                show: 'event_show'
            show:
                actions:
                    - '-edit'
                    - '-delete'
                fields:
                    - { property: 'payload', template: '@cms/Admin/Event/Show/payload.html.twig' }
            list:
                help: 'This list shows all persisted events.'
                sort: ['created', 'DESC']
                actions:
                    - { name: 'show', label: '', title: 'inspect payload', icon: 'eye' }
                    - '-new'
                    - '-edit'
                    - '-delete'
                fields:
                    - { property: 'uuid', label: 'Title', template: '@cms/Admin/User/List/uuid.html.twig' }
                    - { property: 'message', label: 'Message', template: '@cms/Admin/Event/List/message.html.twig' }
                    - 'version'
                    - { property: 'created', type: 'datetime' }
                    - { property: 'user', template: '@cms/Admin/User/List/small.html.twig' }
        Task:
            label: 'Tasks'
            class: RevisionTen\CMS\Model\Task
            permissions:
                list: 'task_list'
                search: 'task_search'
                show: 'task_show'
            show:
                actions:
                    - '-edit'
                    - '-delete'
                fields:
                    - 'uuid'
                    - 'aggregateUuid'
                    - 'command'
                    - { property: 'due', type: 'datetime' }
                    - { property: 'payload', template: '@cms/Admin/Event/Show/payload.html.twig' }
                    - { property: 'resultMessage', template: '@cms/Admin/Event/Show/payload.html.twig' }
            list:
                dql_filter: 'entity.deleted IS NULL OR entity.deleted = 0'
                sort: ['id', 'DESC']
                actions:
                    - { name: 'show', label: '', title: 'inspect payload', icon: 'eye' }
                    - '-new'
                    - '-edit'
                    - '-delete'
                fields:
                    - 'uuid'
                    - 'command'
                    - { property: 'due', type: 'datetime' }
                    - { property: 'resultMessage', label: 'Executed', template: '@cms/Admin/Task/List/result-message.html.twig' }
        UserRead:
            label: 'Users'
            class: RevisionTen\CMS\Model\UserRead
            permissions:
                list: 'user_list'
                search: 'user_search'
                edit: 'user_edit'
                show: 'user_show'
            show:
                actions:
                    - '-edit'
                    - '-delete'
                fields:
                    - { property: 'id', label: 'Avatar', template: '@cms/Admin/User/List/medium.html.twig' }
                    - { property: 'username' }
                    - { property: 'email' }
                    - { property: 'devices' }
                    - { property: 'ips' }
            list:
                sort: ['id', 'DESC']
                actions:
                    - { name: 'show', title: 'View', label: '', icon: 'eye', permission: 'user_show' }
                    - { name: 'cms_user_edit', type: 'route', label: '', title: 'Edit aggregate', icon: 'edit', permission: 'user_edit' }
                    - '-new'
                    - '-edit'
                    - '-delete'
                fields:
                    - { property: 'id', label: 'Avatar', template: '@cms/Admin/User/List/medium.html.twig' }
                    - { property: 'username', label: 'Username' }
                    - { property: 'email', label: 'Email' }
                    - { property: 'roles', label: 'Roles', template: '@cms/Admin/User/List/roles.html.twig' }
        RoleRead:
            label: 'Roles'
            class: RevisionTen\CMS\Model\RoleRead
            permissions:
                list: 'role_list'
                search: 'role_search'
                new: 'role_create'
                edit: 'role_edit'
                show: 'role_show'
            templates:
                list: '@cms/Admin/Role/list.html.twig'
            show:
                actions:
                    - '-edit'
                    - '-delete'
                fields:
                    - { property: 'title' }
                    - { property: 'permissions' }
            list:
                sort: ['id', 'DESC']
                actions:
                    - { name: 'show', title: 'View', label: '', icon: 'eye' }
                    - { name: 'cms_role_edit', type: 'route', label: '', title: 'Edit aggregate', icon: 'edit', permission: 'role_edit' }
                    - '-new'
                    - '-edit'
                    - '-delete'
                fields:
                    - { property: 'title', label: 'Title' }
        FormRead:
            label: 'Forms'
            class: RevisionTen\Forms\Model\FormRead
            permissions:
                list: 'form_list'
                search: 'form_search'
                new: 'form_create'
                edit: 'form_edit'
                delete: 'form_delete'
                clone: 'form_clone'
            templates:
                list: '@cms/Admin/Forms/list.html.twig'
            list:
                sort: ['modified', 'DESC']
                dql_filter: 'entity.deleted IS NULL OR entity.deleted = 0'
                actions:
                    - { name: 'forms_submissions_download', type: 'route', title: 'Download form submissions', label: '', icon: 'download', permission: 'form_submissions' }
                    - { name: 'forms_edit_aggregate', type: 'route', title: 'edit form', label: '', icon: 'edit', permission: 'form_edit' }
                    - { name: 'forms_clone_aggregate', type: 'route', title: 'clone form', label: '', icon: 'clone', permission: 'form_clone' }
                    - { name: 'forms_delete_aggregate', type: 'route', title: 'delete form', label: '', icon: 'trash', css_class: 'text-danger', permission: 'form_delete' }
                    - '-new'
                    - '-edit'
                    - '-delete'
                fields:
                    - 'title'
                    - 'version'
                    - { property: 'created', type: 'datetime' }
                    - { property: 'modified', type: 'datetime' }
        FormSubmission:
            label: 'Submissions'
            class: RevisionTen\Forms\Model\FormSubmission
            permissions:
                list: 'form_submissions'
                show: 'form_submissions'
                search: 'form_submissions'
                delete: 'form_submissions_delete'
            list:
                actions:
                    - 'show'
                    - '-new'
                    - '-edit'
                fields:
                    - 'id'
                    - 'toEmail'
                    - { property: 'form', type: 'string' }
                    - { property: 'opened', template: '@forms/Admin/submission-opened.html.twig' }
                    - { property: 'created', type: 'datetime' }
            show:
                actions:
                    - '-edit'
                fields:
                    - 'id'
                    - { property: 'toEmail', type: 'string' }
                    - { property: 'ccEmail', type: 'string' }
                    - { property: 'bccEmail', type: 'string' }
                    - { property: 'form', type: 'string' }
                    - { property: 'opened', template: '@forms/Admin/submission-opened.html.twig' }
                    - { property: 'created', type: 'datetime' }
                    - { property: 'payload', template: '@forms/Admin/submission-payload.html.twig' }
        MenuRead:
            label: 'Menus'
            class: RevisionTen\CMS\Model\MenuRead
            permissions:
                list: 'menu_list'
                search: 'menu_search'
                new: 'menu_create'
                edit: 'menu_edit'
            templates:
                list: '@cms/Admin/Menu/list.html.twig'
            list:
                sort: ['title', 'DESC']
                actions:
                    - '-new'
                    - '-edit'
                    - '-delete'
                    - { name: 'cms_edit_menu', type: 'route', label: '', title: 'Edit aggregate', icon: 'edit', permission: 'menu_edit' }
                fields:
                    - { property: 'title', label: 'Menu', css_class: 'title-truncate', template: '@cms/Admin/Menu/List/title.html.twig' }
                    - 'version'
                    - 'language'
                    #- { property: 'website', template: '@cms/Admin/Website/List/website.html.twig' }
        FileRead:
            label: 'Files'
            class: RevisionTen\CMS\Model\FileRead
            permissions:
                list: 'file_list'
                search: 'file_search'
                new: 'file_create'
                edit: 'file_edit'
            templates:
                list: '@cms/Admin/File/list.html.twig'
            list:
                sort: ['modified', 'DESC']
                actions:
                    - '-new'
                    - '-edit'
                    - '-delete'
                    - { name: 'cms_file_edit', type: 'route', label: '', title: 'Edit aggregate', icon: 'edit', permission: 'file_edit' }
                fields:
                    - { property: 'title', label: 'Title', css_class: 'title-truncate', template: '@cms/Admin/File/List/title.html.twig' }
                    - 'version'
                    - { property: 'mimeType', label: 'MimeType' }
                    - { property: 'size', template: '@cms/Admin/File/List/size.html.twig' }
                    - 'language'
                    - { property: 'created', type: 'datetime' }
                    - { property: 'modified', type: 'datetime' }
                    #- { property: 'website', type: 'raw' }
